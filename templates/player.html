<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="UTF-8">
  <title>Bet TV Plus - Live Player</title>
  <link href="https://vjs.zencdn.net/8.5.2/video-js.css" rel="stylesheet" />
  <script src="https://vjs.zencdn.net/8.5.2/video.min.js"></script>
  <style>
    body {
      background-color: #111;
      color: white;
      text-align: center;
      font-family: Arial, sans-serif;
      margin-top: 40px;
    }
    .video-container {
      width: 80%;
      max-width: 800px;
      margin: auto;
    }
  </style>
</head>
<body>
  <h1>Bet TV Plus - Live Player</h1>
  <div class="video-container">
    <video id="my-video" class="video-js vjs-big-play-centered" controls preload="auto" width="800" height="450">
      <source id="video-source" src="" type="application/x-mpegURL">
    </video>
  </div>

  <script>
    async function loadPlaylist() {
      const urlParams = new URLSearchParams(window.location.search);
      const mac = urlParams.get("mac");

      if (!mac) {
        alert("MAC adresa nije pronađena!");
        return;
      }

      const res = await fetch(`/get_playlist?mac=${mac}`);
      const data = await res.json();

      if (data.playlist) {
        document.getElementById("video-source").src = data.playlist;
        const player = videojs("my-video");
        player.src({ src: data.playlist, type: "application/x-mpegURL" });
        player.play();
      } else {
        alert("Playlist nije pronađen za ovaj MAC.");
      }
    }

    loadPlaylist();
  </script>
</body>
</html>

</body>
</html>
